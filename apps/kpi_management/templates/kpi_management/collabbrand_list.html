{% extends layout_path %}{% load static %}{% load theme %}{% block title %}Collab Brand Management{% endblock %}

{% block page_css %}
{% include 'kpi_management/_dark_mode_css.html' %}
{% endblock page_css %}

{% block content %}
<div class="row mb-4"><div class="col-12"><div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Collab Brand Management</h5>
    <div class="d-flex gap-2">
      <a href="{% url 'kpi_management:collabbrand-export-csv' %}" class="btn btn-outline-success">
        <i class="icon-base bx bx-download me-1"></i>
        Export CSV
      </a>
      <a href="{% url 'kpi_management:collabbrand-create' %}" class="btn btn-primary">
        <i class="icon-base bx bx-plus me-1"></i> Tambah Collab
      </a>
    </div>
  </div>
  <div class="card-body">
    <form method="get" class="mb-4"><div class="row g-3">
      <div class="col-md-4"><input type="text" name="search" class="form-control" placeholder="Cari..." value="{{ request.GET.search }}"></div>
      <div class="col-md-3"><select name="status" class="form-select"><option value="">Semua Status</option>
        <option value="active" {% if request.GET.status == 'active' %}selected{% endif %}>Active</option>
        <option value="completed" {% if request.GET.status == 'completed' %}selected{% endif %}>Completed</option>
      </select></div>
      <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">Filter</button></div>
    </div></form>
    <div class="table-responsive"><table class="table table-hover">
      <thead><tr><th>Brand Name</th><th>Contact</th><th>Type</th><th>Contract Value</th><th>Payment</th><th>Status</th><th>Aksi</th></tr></thead>
      <tbody>{% for collab in collabs %}
        <tr><td><strong>{{ collab.brand_name }}</strong></td><td>{{ collab.contact_person }}</td>
        <td>{{ collab.collaboration_type }}</td><td>{{ collab.contract_value|format_k }}</td>
        <td><span class="badge bg-label-{% if collab.payment_status == 'paid' %}success{% else %}warning{% endif %}">{{ collab.payment_status }}</span></td>
        <td>{% if collab.status == 'active' %}<span class="badge bg-label-success">Active</span>
        {% elif collab.status == 'completed' %}<span class="badge bg-label-info">Completed</span>
        {% else %}<span class="badge bg-label-warning">{{ collab.get_status_display }}</span>{% endif %}</td>
        <td><div class="dropdown"><button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
          <i class="icon-base bx bx-dots-vertical-rounded"></i></button>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="{% url 'kpi_management:collabbrand-detail' collab.pk %}"><i class="icon-base bx bx-show me-1"></i> Detail</a>
            <a class="dropdown-item" href="{% url 'kpi_management:collabbrand-update' collab.pk %}"><i class="icon-base bx bx-edit-alt me-1"></i> Edit</a>
            <a class="dropdown-item text-danger" href="{% url 'kpi_management:collabbrand-delete' collab.pk %}"><i class="icon-base bx bx-trash me-1"></i> Hapus</a>
          </div></div></td></tr>
      {% empty %}<tr><td colspan="7" class="text-center">Tidak ada data</td></tr>{% endfor %}
    </tbody></table></div>
  </div>
</div></div></div>
{% endblock %}

